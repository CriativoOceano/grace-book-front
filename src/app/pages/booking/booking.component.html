<div class="booking-container min-h-screen py-8">
  <p-toast></p-toast>
  
  <div class="container mx-auto px-4 max-w-7xl">
    
    <!-- Header -->
    <div class="text-center mb-8 animate-fade-in">
      <h1 class="text-4xl font-bold text-gray-800 mb-4 font-serif">
        Fazer Reserva
      </h1>
      <p class="text-lg text-gray-600 max-w-2xl mx-auto">
        Preencha as informações abaixo para fazer sua reserva e viver uma experiência única
      </p>
    </div>

    <!-- Loading State -->
    <div *ngIf="!formInitialized" class="flex justify-center items-center min-h-96">
      <div class="text-center">
        <p-progressSpinner 
          styleClass="w-12 h-12" 
          strokeWidth="4" 
          fill="transparent" 
          animationDuration="1s">
        </p-progressSpinner>
        <p class="mt-4 text-gray-600">Carregando formulário...</p>
      </div>
    </div>
    
    <div *ngIf="formInitialized">
      
      <!-- Main Content - Form and Summary Side by Side -->
      <div [class]="hasFormData() ? 'grid grid-cols-1 lg:grid-cols-3 gap-8' : 'grid grid-cols-1 gap-8'">
        
        <!-- Form Content -->
        <div [class]="hasFormData() ? 'lg:col-span-2' : 'lg:col-span-1'">

        <!-- Form -->
        <form [formGroup]="bookingForm" class="space-y-6">
          

          <!-- Step 1: Informações Básicas -->
          <div *ngIf="currentStep === 0" class="animate-slide-up">
            <p-card>
              <ng-template pTemplate="header">
                <div class="card-header">
                  <p-steps 
                    [model]="steps" 
                    [activeIndex]="currentStep"
                    [readonly]="false"
                    styleClass="custom-steps-header">
                  </p-steps>
                </div>
              </ng-template>

              <div class="space-y-6">
                <!-- Tipo de Reserva -->
                <div class="form-group">
                  <label class="form-label required">Escolha o tipo de reserva que melhor se adapta às suas necessidades</label>
                  <div class="reservation-type-cards">
                    @for (tipo of tiposReserva; track tipo.value) {
                      <div 
                        class="reservation-card"
                        [class.selected]="bookingForm.get('tipo')?.value === tipo.value"
                        (click)="bookingForm.get('tipo')?.setValue(tipo.value)">
                        <div class="card-title">
                          <i [class]="getTypeIcon(tipo.value)" class="mr-2"></i>
                          {{ tipo.label }}
                        </div>
                        <div class="card-description">{{ tipo.description }}</div>
                        <div class="card-price">{{ getTypePrice(tipo.value) }}</div>
                        
                        <!-- Quantidade de Pessoas dentro do card (apenas para Diária) -->
                        <div *ngIf="tipo.value === 'diaria' && bookingForm.get('tipo')?.value === 'diaria'" 
                             class="card-quantity-section"
                             [@slideInUp]="showQuantitiesSection">
                          <div class="quantity-label">Quantidade de Pessoas</div>
                          <div class="quantity-input-container">
                            <button 
                              type="button" 
                              class="quantity-btn minus"
                              (click)="decreaseQuantity('quantidadePessoas')"
                              [disabled]="bookingForm.get('quantidadePessoas')?.value <= 1">
                              <i class="pi pi-minus"></i>
                            </button>
                            <input 
                              type="number" 
                              formControlName="quantidadePessoas"
                              class="quantity-input"
                              min="1" 
                              [max]="qtdMaxPessoas"
                              maxlength="3"
                              (input)="validatePessoasInput($event)"
                              (keydown)="preventInvalidInput($event)">
                            <button 
                              type="button" 
                              class="quantity-btn plus"
                              (click)="increaseQuantity('quantidadePessoas')"
                              [disabled]="bookingForm.get('quantidadePessoas')?.value >= qtdMaxPessoas">
                              <i class="pi pi-plus"></i>
                            </button>
                          </div>
                          
                          <!-- Link para Tabela de Preços -->
                          <div class="price-table-link">
                            <button 
                              type="button"
                              class="link-button"
                              (click)="mostrarTabelaPrecos()">
                              <i class="pi pi-list"></i>
                              Ver Tabela de Preços
                            </button>
                          </div>
                          
                          <div *ngIf="bookingForm.get('quantidadePessoas')?.invalid && bookingForm.get('quantidadePessoas')?.touched" 
                               class="error-message">
                            <i class="pi pi-exclamation-triangle"></i>
                            Quantidade deve ser entre 1 e 200 pessoas
                          </div>
                        </div>
                      </div>
                    }
                  </div>
                  <div *ngIf="bookingForm.get('tipo')?.invalid && bookingForm.get('tipo')?.touched" 
                       class="error-message">
                    <i class="pi pi-exclamation-triangle"></i>
                    Selecione o tipo de reserva
                  </div>
                </div>

                <!-- Período da Reserva -->
                <div class="form-group" 
                     *ngIf="showPeriodSection"
                     [@slideInUp]="showPeriodSection">
                  <label class="form-label required">Período da Reserva</label>
                  <p-datepicker 
                    formControlName="periodoReserva"
                    [selectionMode]="bookingForm.get('tipo')?.value === 'batismo' ? 'single' : 'range'"
                    [readonlyInput]="true"
                    [placeholder]="bookingForm.get('tipo')?.value === 'batismo' ? 'Selecione o dia' : 'Selecione o período'"
                    dateFormat="dd/mm/yy"
                    [showIcon]="true"
                    inline="true"
                    inputId="periodoReserva"
                    styleClass="w-full"
                    [minDate]="minDate"
                    [maxDate]="maxDate"
                    [disabledDates]="datasBloqueadas">
                  </p-datepicker>
                  
                  <!-- Legenda do calendário -->
                  <!-- <div class="calendar-legend mt-4">
                    <div class="legend-item">
                      <div class="legend-color available"></div>
                      <span>Disponível</span>
                    </div>
                    <div class="legend-item">
                      <div class="legend-color blocked"></div>
                      <span>Reservado</span>
                    </div>
                    <div class="legend-item">
                      <div class="legend-color past"></div>
                      <span>Passado</span>
                    </div>
                    <div class="legend-item">
                      <div class="legend-color today"></div>
                      <span>Hoje</span>
                    </div>
                  </div> -->
                  <div *ngIf="bookingForm.get('periodoReserva')?.invalid && bookingForm.get('periodoReserva')?.touched" 
                       class="error-message">
                    <i class="pi pi-exclamation-triangle"></i>
                    <span *ngIf="bookingForm.get('periodoReserva')?.errors?.['required']">
                      {{ bookingForm.get('tipo')?.value === 'batismo' ? 'Selecione o dia do batismo' : 'Selecione o período da reserva' }}
                    </span>
                    <span *ngIf="bookingForm.get('periodoReserva')?.errors?.['dataBloqueada']">
                      {{ bookingForm.get('tipo')?.value === 'batismo' ? 'Este dia já está reservado' : 'Este período contém datas já reservadas' }}
                    </span>
                    <span *ngIf="bookingForm.get('periodoReserva')?.errors?.['periodoInvalido']">
                      {{ bookingForm.get('tipo')?.value === 'batismo' ? 'Selecione uma data válida para o batismo' : 'Selecione um período válido' }}
                    </span>
                  </div>
                </div>


                <!-- Actions -->
                <div class="flex justify-end">
                  <p-button 
                    label="Continuar" 
                    icon="pi pi-arrow-right"
                    iconPos="right"
                    size="large"
                    (onClick)="nextStep()"
                    [disabled]="!validateStep(0)"
                    styleClass="continue-btn">
                  </p-button>
                </div>
              </div>
            </p-card>
          </div>

          <!-- Step 2: Adicionais -->
          <div *ngIf="currentStep === 1" class="animate-slide-up">
            <p-card>
              <ng-template pTemplate="header">
                <div class="card-header">
                  <p-steps 
                    [model]="steps" 
                    [activeIndex]="currentStep"
                    [readonly]="false"
                    styleClass="custom-steps-header">
                  </p-steps>
                </div>
              </ng-template>

              <div class="space-y-6">

                <!-- Carrossel de Imagens do Chalé -->
                <div class="form-group">
                  <label class="form-label">Nossos Chalés</label>
                  
                  <!-- Loading state -->
                  <div *ngIf="chaletImagesLoading" class="flex justify-center items-center py-8">
                    <p-progressSpinner 
                      styleClass="w-8 h-8" 
                      strokeWidth="4" 
                      fill="transparent" 
                      animationDuration="1s">
                    </p-progressSpinner>
                    <p class="ml-3 text-gray-600">Carregando imagens dos chalés...</p>
                  </div>
                  
                  <!-- Carrossel de imagens -->
                  <div *ngIf="!chaletImagesLoading && chaletImages.length > 0" class="chale-carousel">
                    <p-carousel 
                      [value]="chaletImages" 
                      [numVisible]="1" 
                      [numScroll]="1"
                      [circular]="true"
                      [autoplayInterval]="4000"
                      [showIndicators]="true"
                      [showNavigators]="false"
                      styleClass="chale-image-carousel">
                      <ng-template pTemplate="item" let-chalet>
                        <div class="chale-image-container" (click)="expandirImagem()">
                          <img [src]="chalet.src" [alt]="chalet.alt" class="chale-image">
                          <div class="image-overlay">
                            <i class="pi pi-search-plus"></i>
                          </div>
                          <div class="chale-info-overlay">
                            <h4 class="chale-title">{{ chalet.title }}</h4>
                            <p class="chale-description">{{ chalet.description }}</p>
                          </div>
                        </div>
                      </ng-template>
                    </p-carousel>
                  </div>
                  
                  <!-- Fallback quando não há imagens -->
                  <div *ngIf="!chaletImagesLoading && chaletImages.length === 0" class="no-images-message">
                    <i class="pi pi-image text-4xl text-gray-400 mb-4"></i>
                    <p class="text-gray-600">Nenhuma imagem de chalé disponível no momento.</p>
                  </div>
                </div>

                <!-- Amenidades -->
                <div class="form-group">
                  <label class="form-label">
                    Amenidades dos Chalés
                    <!-- Botão de informações sobre itens necessários - COMENTADO TEMPORARIAMENTE -->
                  <!--
                  <button 
                      type="button"
                      class="info-button"
                      (click)="mostrarInfoItensNecessarios()"
                      pButton
                      icon="pi pi-info-circle"
                      [rounded]="true"
                      [text]="true"
                      severity="info"
                      size="small"
                      [disabled]="(bookingForm.get('quantidadeChales')?.value || 0) === 0"
                      [title]="(bookingForm.get('quantidadeChales')?.value || 0) === 0 ? 'Selecione pelo menos um chalé para ver os itens necessários' : 'Ver itens necessários para sua estadia'">
                    </button>
                  -->
                  </label>
                  <div class="amenities-grid">
                    <div class="amenity-item">
                      <i class="pi pi-users"></i>
                      <span>Até 2 pessoas por chalé</span>
                    </div>
                    <div class="amenity-item">
                      <i class="pi pi-home"></i>
                      <span>Ar condicionado</span>
                    </div>
                    <div class="amenity-item">
                      <i class="pi pi-car"></i>
                      <span>Estacionamento</span>
                    </div>
                  </div>
                </div>
                <div class="form-group">
                  <div class="chale-price-display">
                    <p-chip [label]="(precoChale | currency:'BRL':'symbol':'1.2-2':'pt-BR') + '/dia por chalé'" styleClass="price-chip"></p-chip>
                  </div>
                </div>

                <!-- Quantidade de Chalés -->
                <div class="form-group">
                  <label class="form-label">Quantidade de Chalés</label>
                  <div class="quantity-input-container">
                    <button 
                      type="button" 
                      class="quantity-btn minus"
                      (click)="decreaseQuantity('quantidadeChales')"
                      [disabled]="bookingForm.get('quantidadeChales')?.value <= 0">
                      <i class="pi pi-minus"></i>
                    </button>
                    <input 
                      type="number" 
                      formControlName="quantidadeChales"
                      class="quantity-input"
                      min="0" 
                      [max]="quantidadeMaximaChales"
                      readonly>
                    <button 
                      type="button" 
                      class="quantity-btn plus"
                      (click)="increaseQuantity('quantidadeChales')"
                      [disabled]="bookingForm.get('quantidadeChales')?.value >= quantidadeMaximaChales">
                      <i class="pi pi-plus"></i>
                    </button>
                  </div>
                  <div class="quantity-info">
                    <span class="text-sm text-gray-600">
                      R$ {{precoChale | number:'1.2-2':'pt-BR'}}/dia por chalé
                    </span>
                  </div>
                </div>

                <!-- Observações -->
                <div class="form-group">
                  <label class="form-label">Observações</label>
                  <textarea 
                    formControlName="observacoes"
                    placeholder="Observações especiais (opcional)"
                    rows="3"
                    class="w-full p-4 text-lg border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-green focus:border-transparent resize-none">
                  </textarea>
                </div>

                <!-- Actions -->
                <div class="flex justify-between">
                  <p-button 
                    label="Voltar" 
                    icon="pi pi-arrow-left"
                    iconPos="left"
                    severity="secondary"
                    size="large"
                    (onClick)="prevStep()">
                  </p-button>
                  
                  <p-button 
                    label="Continuar" 
                    icon="pi pi-arrow-right"
                    iconPos="right"
                    size="large"
                    (onClick)="nextStep()"
                    styleClass="continue-btn">
                  </p-button>
                </div>
              </div>
            </p-card>
          </div>

          <!-- Step 3: Informações do Hóspede -->
          <div *ngIf="currentStep === 2" class="animate-slide-up">
            <p-card>
              <ng-template pTemplate="header">
                <div class="card-header">
                  <p-steps 
                    [model]="steps" 
                    [activeIndex]="currentStep"
                    [readonly]="false"
                    styleClass="custom-steps-header">
                  </p-steps>
                </div>
              </ng-template>

              <div class="space-y-3">
                
                <!-- Nome e Sobrenome -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <div class="form-group">
                    <label class="form-label required">Nome</label>
                    <input 
                      pInputText
                      formControlName="nomeHospede"
                      placeholder="Digite seu nome"
                      class="w-full p-4 text-lg border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-green focus:border-transparent">
                    <div *ngIf="bookingForm.get('nomeHospede')?.invalid && bookingForm.get('nomeHospede')?.touched" 
                         class="error-message">
                      <i class="pi pi-exclamation-triangle"></i>
                      Nome é obrigatório
                    </div>
                  </div>

                  <div class="form-group">
                    <label class="form-label required">Sobrenome</label>
                    <input 
                      pInputText
                      formControlName="sobrenomeHospede"
                      placeholder="Digite seu sobrenome"
                      class="w-full p-4 text-lg border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-green focus:border-transparent">
                    <div *ngIf="bookingForm.get('sobrenomeHospede')?.invalid && bookingForm.get('sobrenomeHospede')?.touched" 
                         class="error-message">
                      <i class="pi pi-exclamation-triangle"></i>
                      Sobrenome é obrigatório
                    </div>
                  </div>
                </div>

                <!-- Email e CPF -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <div class="form-group">
                    <label class="form-label required">Email</label>
                    <input 
                      pInputText
                      type="email"
                      formControlName="emailHospede"
                      placeholder="Digite seu email"
                      class="w-full p-4 text-lg border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-green focus:border-transparent">
                    <div *ngIf="bookingForm.get('emailHospede')?.invalid && bookingForm.get('emailHospede')?.touched" 
                         class="error-message">
                      <i class="pi pi-exclamation-triangle"></i>
                      Email é obrigatório
                    </div>
                  </div>

                  <div class="form-group">
                    <label class="form-label required">CPF</label>
                    <input 
                      pInputText
                      formControlName="cpfHospede"
                      placeholder="000.000.000-00"
                      maxlength="14"
                      (input)="formatCPF($event)"
                      class="w-full p-4 text-lg border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-green focus:border-transparent">
                    <div *ngIf="bookingForm.get('cpfHospede')?.invalid && bookingForm.get('cpfHospede')?.touched" 
                         class="error-message">
                      <i class="pi pi-exclamation-triangle"></i>
                      CPF é obrigatório
                    </div>
                  </div>
                </div>

                <!-- Telefone -->
                <div class="form-group">
                  <label class="form-label required">Telefone</label>
                  <input 
                    pInputText
                    formControlName="telefoneHospede"
                    placeholder="(11) 99999-9999"
                    maxlength="15"
                    (input)="formatPhone($event)"
                    class="w-full p-4 text-lg border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-green focus:border-transparent">
                  <div *ngIf="bookingForm.get('telefoneHospede')?.invalid && bookingForm.get('telefoneHospede')?.touched" 
                       class="error-message">
                    <i class="pi pi-exclamation-triangle"></i>
                    Telefone é obrigatório
                  </div>
                </div>

                <!-- CEP -->
                <div class="form-group">
                  <label class="form-label">CEP</label>
                  <input 
                    pInputText
                    formControlName="cepHospede"
                    placeholder="00000-000"
                    maxlength="9"
                    (input)="formatCEP($event)"
                    class="w-full p-4 text-lg border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-green focus:border-transparent">
                  <div *ngIf="buscandoCep" class="mt-2 text-sm text-blue-600 flex items-center gap-1">
                    <i class="pi pi-spin pi-spinner"></i>
                    <span>Buscando endereço...</span>
                  </div>
                  <div *ngIf="cepEncontrado" class="mt-2 text-sm text-green-600 flex items-center justify-between">
                    <div class="flex items-center gap-1">
                      <i class="pi pi-check-circle"></i>
                      <span>Endereço encontrado automaticamente</span>
                    </div>
                    <button 
                      type="button"
                      (click)="limparEndereco()"
                      class="text-xs text-blue-600 hover:text-blue-800 underline">
                      Editar manualmente
                    </button>
                  </div>
                </div>

                <!-- Endereço -->
                <div class="form-group">
                  <label class="form-label">Endereço</label>
                  <input 
                    pInputText
                    formControlName="enderecoHospede"
                    placeholder="Rua, Avenida, etc."
                    [readonly]="cepEncontrado"
                    [class.bg-gray-100]="cepEncontrado"
                    class="w-full p-4 text-lg border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-green focus:border-transparent">
                </div>

                <!-- Número -->
                <div class="form-group">
                  <label class="form-label">Número</label>
                  <input 
                    pInputText
                    formControlName="numeroHospede"
                    placeholder="123"
                    class="w-full p-4 text-lg border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-green focus:border-transparent">
                </div>

                <!-- Bairro -->
                <div class="form-group">
                  <label class="form-label">Bairro</label>
                  <input 
                    pInputText
                    formControlName="bairroHospede"
                    placeholder="Nome do bairro"
                    [readonly]="cepEncontrado"
                    [class.bg-gray-100]="cepEncontrado"
                    class="w-full p-4 text-lg border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-green focus:border-transparent">
                </div>

                <!-- Cidade e UF -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <div class="form-group">
                    <label class="form-label">Cidade</label>
                    <input 
                      pInputText
                      formControlName="cidadeHospede"
                      placeholder="Nome da cidade"
                      [readonly]="cepEncontrado"
                      [class.bg-gray-100]="cepEncontrado"
                      class="w-full p-4 text-lg border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-green focus:border-transparent">
                  </div>

                  <div class="form-group">
                    <label class="form-label">UF</label>
                    <input 
                      pInputText
                      formControlName="ufHospede"
                      placeholder="Estado"
                      maxlength="2"
                      [readonly]="cepEncontrado"
                      [class.bg-gray-100]="cepEncontrado"
                      class="w-full p-4 text-lg border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-green focus:border-transparent">
                  </div>
                </div>

                <!-- Observações Especiais -->
                <div class="form-group">
                  <label class="form-label">Observações Especiais</label>
                  <textarea 
                    formControlName="observacoesHospede"
                    placeholder="Alguma observação especial sobre sua estadia? (opcional)"
                    rows="3"
                    class="w-full p-4 text-lg border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-green focus:border-transparent resize-none">
                  </textarea>
                </div>

                <!-- Actions -->
                <div class="flex justify-between">
                  <p-button 
                    label="Voltar" 
                    icon="pi pi-arrow-left"
                    iconPos="left"
                    severity="secondary"
                    size="large"
                    (onClick)="prevStep()">
                  </p-button>
                  
                  <p-button 
                    label="Continuar" 
                    icon="pi pi-arrow-right"
                    iconPos="right"
                    size="large"
                    (onClick)="nextStepWithValidation()"
                    [loading]="isLoading"
                    [disabled]="!validateStep(2)"
                    styleClass="continue-btn">
                  </p-button>
                </div>
              </div>
            </p-card>
          </div>

          <!-- Step 4: Pagamento -->
          <div *ngIf="currentStep === 3" class="animate-slide-up">
            <p-card>
              <ng-template pTemplate="header">
                <div class="card-header">
                  <p-steps 
                    [model]="steps" 
                    [activeIndex]="currentStep"
                    [readonly]="false"
                    styleClass="custom-steps-header">
                  </p-steps>
                </div>
              </ng-template>

              <div class="space-y-6">
                
                <!-- Modo de Pagamento -->
                <div class="form-group">
                  <label class="form-label required">Modo de Pagamento</label>
                  <div class="payment-methods-grid">
                    @for (modo of modosPagamento; track modo.value) {
                      <div 
                        class="payment-method-card"
                        [class.selected]="bookingForm.get('modoPagamento')?.value === modo.value"
                        (click)="bookingForm.get('modoPagamento')?.setValue(modo.value)">
                        <div class="card-title">
                          <i [class]="getPaymentIcon(modo.value)" class="mr-2"></i>
                          {{ modo.label }}
                        </div>
                        <div class="card-description">{{ modo.description }}</div>
                      </div>
                    }
                  </div>
                  <div *ngIf="bookingForm.get('modoPagamento')?.invalid && bookingForm.get('modoPagamento')?.touched" 
                       class="error-message">
                    <i class="pi pi-exclamation-triangle"></i>
                    Selecione a forma de pagamento
                  </div>
                </div>

                <!-- Parcelamento (apenas para cartão) -->
                <div class="form-group" *ngIf="bookingForm.get('modoPagamento')?.value === 'CARTAO'">
                  <label class="form-label">Parcelamento</label>
                  <p-dropdown 
                    formControlName="parcelas"
                    [options]="getParcelasOptions()"
                    placeholder="Selecione o número de parcelas"
                    styleClass="w-full"
                    panelStyleClass="w-full">
                  </p-dropdown>
                </div>

                <!-- Actions -->
                <div class="flex justify-start">
                  <p-button 
                    label="Voltar" 
                    icon="pi pi-arrow-left"
                    iconPos="left"
                    severity="secondary"
                    size="large"
                    (onClick)="prevStep()">
                  </p-button>
                </div>
              </div>
            </p-card>
          </div>

        </form>
        </div>
        
        <!-- Summary Sidebar - Sticky -->
        <div class="lg:col-span-1" *ngIf="hasFormData()">
          <div class="sticky-summary" [@fadeInSlide]="hasFormData()">
            <app-pricing-summary 
              [pricing]="pricingData"
              [precoChale]="precoChale"
              [showFinalizeButton]="currentStep === 3"
              [isProcessing]="isProcessingPayment"
              [canFinalize]="bookingForm.get('modoPagamento')?.valid || false"
              (onFinalize)="finalizarReserva()">
            </app-pricing-summary>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal para Imagem Expandida com Carrossel -->
  <p-dialog 
    [(visible)]="imagemExpandidaVisible" 
    [modal]="true" 
    [closable]="true"
    [draggable]="false"
    [resizable]="false"
    styleClass="image-dialog"
    [style]="{width: '100vw', height: '100vh', maxWidth: '100vw', maxHeight: '100vh'}">
    <ng-template pTemplate="header">
      <span class="text-lg font-semibold">Nossos Chalés</span>
    </ng-template>
    <div class="modal-carousel-container">
      <p-carousel 
        [value]="chaletImages" 
        [numVisible]="1" 
        [numScroll]="1"
        [circular]="true"
        [showIndicators]="true"
        [showNavigators]="true"
        styleClass="modal-image-carousel">
        <ng-template pTemplate="item" let-chalet>
          <div class="modal-image-container">
            <img [src]="chalet.src" [alt]="chalet.alt" class="modal-image">
            <div class="modal-chalet-info">
              <h3 class="modal-chalet-title">{{ chalet.title }}</h3>
              <p class="modal-chalet-description">{{ chalet.description }}</p>
            </div>
          </div>
        </ng-template>
      </p-carousel>
    </div>
  </p-dialog>

  <!-- Dialog para informações sobre itens necessários - COMENTADO TEMPORARIAMENTE -->
  <!--
  <p-dialog 
    [(visible)]="infoItensVisible" 
    [modal]="true" 
    [closable]="true"
    [draggable]="false"
    [resizable]="false"
    header="Itens Necessários para sua Estadia"
    styleClass="info-dialog"
    [style]="{width: '90vw', maxWidth: '600px'}">
    <div class="info-content">
      <div class="alert-banner">
        <i class="pi pi-info-circle"></i>
        <p>Para garantir seu conforto durante a estadia, é importante trazer os seguintes itens:</p>
      </div>
      
      <div class="items-section">
        <h4><i class="pi pi-home"></i> Roupas de Cama</h4>
        <ul>
          <li>Lençóis</li>
          <li>Fronhas</li>
          <li>Cobertores ou edredons</li>
        </ul>
      </div>
      
      <div class="items-section">
        <h4><i class="pi pi-sparkles"></i> Itens de Higiene Pessoal</h4>
        <ul>
          <li>Toalhas de banho</li>
          <li>Sabonete e shampoo</li>
          <li>Produtos de higiene pessoal</li>
        </ul>
      </div>
      
      <div class="note-footer">
        <i class="pi pi-exclamation-triangle"></i>
        <span>Os chalés não fornecem estes itens.</span>
      </div>
    </div>
  </p-dialog>
  -->

  <!-- Dialog para Tabela de Preços -->
  <p-dialog 
    [(visible)]="tabelaPrecosVisible" 
    [modal]="true" 
    [closable]="true"
    [draggable]="false"
    [resizable]="false"
    header="Tabela de Preços - Diária Completa"
    styleClass="price-table-dialog"
    [style]="{width: '90vw', maxWidth: '600px'}">
    <div class="price-dialog-content">
      <div class="price-intro">
        <i class="pi pi-info-circle"></i>
        <p>Nossos valores são calculados por dia de acordo com a quantidade de pessoas:</p>
      </div>
      
      <div class="price-items">
        @for (faixa of faixasPreco; track faixa.maxPessoas) {
          <div class="price-item">
            <div class="price-item-header">
              <i class="pi pi-users"></i>
              <span class="people-range">Até {{ faixa.maxPessoas }} pessoas</span>
            </div>
            <div class="price-item-value">{{ faixa.valor | currency:'BRL':'symbol':'1.2-2':'pt-BR' }} <span class="per-day">/dia</span></div>
          </div>
        }
      </div>
      
      <div class="price-footer-note">
        <i class="pi pi-info-circle"></i>
        <span>O valor total será calculado multiplicando o valor da faixa pelo número de dias da reserva.</span>
      </div>
    </div>
  </p-dialog>
</div>